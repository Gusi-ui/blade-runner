---
// Componente de Juegos Retro
---

<div id="games-component" class="hidden">
  <div class="mb-4 text-terminal-bright">
    ╔═══════════════════════════════════════════════════════════╗ ║ JUEGOS RETRO ║
    ╚═══════════════════════════════════════════════════════════╝
  </div>

  <div id="games-menu" class="space-y-4">
    <div class="mb-4 text-terminal-text">Selecciona un juego:</div>

    <div class="menu-item" data-game="snake">
      <span class="text-terminal-bright">[1]</span> Snake
      <div class="ml-4 text-xs text-terminal-dim">Clásico juego de la serpiente</div>
    </div>

    <div class="menu-item" data-game="hangman">
      <span class="text-terminal-bright">[2]</span> El Ahorcado Cósmico
      <div class="ml-4 text-xs text-terminal-dim">Adivina palabras del espacio</div>
    </div>

    <div class="menu-item" data-game="tictactoe">
      <span class="text-terminal-bright">[3]</span> Tres en Raya
      <div class="ml-4 text-xs text-terminal-dim">Contra la IA</div>
    </div>

    <div class="mt-4 text-sm text-terminal-dim">Escribe 'menu' para volver al menú principal.</div>
  </div>

  <div id="game-container" class="hidden"></div>
</div>

<script src="../scripts/snake.ts"></script>
<script src="../scripts/hangman.ts"></script>
<script src="../scripts/tictactoe.ts"></script>

<script>
  document.addEventListener('loadView', (e: Event) => {
    const customEvent = e as CustomEvent;
    if (customEvent.detail.view === 'games') {
      const terminal = window.terminal;
      const gamesComponent = document.getElementById('games-component');

      if (terminal && gamesComponent) {
        terminal.printOutput(gamesComponent.innerHTML);

        // Añadir event listeners a las opciones de juegos
        setTimeout(() => {
          const menuItems = document.querySelectorAll('[data-game]');
          menuItems.forEach(item => {
            item.addEventListener('click', () => {
              const game = item.getAttribute('data-game');
              if (game) {
                loadGame(game);
              }
            });
          });
        }, 100);
      }
    }
  });

  function loadGame(game: string): void {
    const terminal = window.terminal;

    if (!terminal) return;

    switch (game) {
      case 'snake':
        if (window.Snake) {
          new window.Snake(terminal);
        }
        break;
      case 'hangman':
        if (window.Hangman) {
          new window.Hangman(terminal);
        }
        break;
      case 'tictactoe':
        if (window.TicTacToe) {
          new window.TicTacToe(terminal);
        }
        break;
    }
  }
</script>

<style>
  /* Estilos adicionales si es necesario */
</style>
