---
// Componente de Proyectos
---

<div id="projects-component" class="hidden">
  <div class="section-title">Proyectos de Gusi</div>

  <div class="space-y-6">
    <!-- Proyecto 1: Blade Runner Terminal -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/cyberpunk-terminal-interface.svg"
            alt="Terminal cyberpunk retro-futurista con interfaz verde sobre negro estilo Blade Runner"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Terminal interactivo estilo cyberpunk con efectos visuales CRT"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà Blade Runner Terminal</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Activo</span>
          </div>
          <div class="mb-3">
            Terminal retro-futurista interactiva construida con Astro. Simula una interfaz de l√≠nea
            de comandos con est√©tica cyberpunk inspirada en Blade Runner, incluyendo efectos
            visuales CRT, integraci√≥n de APIs externas y mini-juegos cl√°sicos.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> Astro, TypeScript, Tailwind CSS, NASA
            API, NewsAPI
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Web:</span>
            <a
              href="https://gusi.dev/"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              gusi.dev ‚Üí
            </a>
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">GitHub:</span>
            <a
              href="https://github.com/Gusi-ui/blade-runner"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              github.com/Gusi-ui/blade-runner ‚Üí
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 2: Portfolio Personal -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/developer-portfolio.svg"
            alt="Portfolio developer con dise√±o moderno y gradientes vibrantes - Jos√© Mart√≠nez Gusi"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Portfolio profesional de desarrollador full stack con m√©tricas de proyectos"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà Portfolio Personal</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Activo</span>
          </div>
          <div class="mb-3">
            Portfolio profesional de desarrollador freelance especializado en experiencias digitales
            excepcionales. Dise√±o moderno con gradientes vibrantes, m√©tricas de proyectos
            completados y servicios de desarrollo web y aplicaciones m√≥viles.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> HTML5, CSS3, JavaScript, Dise√±o Responsivo
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Web:</span>
            <a
              href="https://alamia.es/"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              alamia.es ‚Üí
            </a>
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">GitHub:</span>
            <a
              href="https://github.com/Gusi-ui/Gusi-ui"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              github.com/Gusi-ui/Gusi-ui ‚Üí
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 3: Dashboard Analytics -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/analytics-dashboard.svg"
            alt="Dashboard de analytics con gr√°ficos y m√©tricas empresariales - Analytics Pro"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Dashboard empresarial con m√©tricas de usuarios, ingresos y conversiones"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà Analytics Pro Dashboard</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Activo</span>
          </div>
          <div class="mb-3">
            Dashboard avanzado para an√°lisis de m√©tricas empresariales. Visualizaci√≥n en tiempo real
            de usuarios, ingresos, pedidos y tasas de conversi√≥n. Incluye gr√°ficos interactivos de
            tendencias mensuales y navegaci√≥n intuitiva para administraci√≥n de datos.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> React, JavaScript, Chart.js, Analytics
            API
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">Demo:</span>
            <a
              href="https://alamia.es/proyectos-ejemplo/dashboard-analytics/index.html"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              Ver Dashboard ‚Üí
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 4: MediCitas -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/medical-appointments.svg"
            alt="Plataforma de gesti√≥n de citas m√©dicas con interfaz profesional - MediCitas"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Sistema inteligente para gesti√≥n de citas m√©dicas con m√°s de 25,000 citas realizadas"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà MediCitas - Gesti√≥n de Citas</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Activo</span>
          </div>
          <div class="mb-3">
            Plataforma integral para gesti√≥n inteligente de citas m√©dicas. Sistema completo para
            agendar, consultar y administrar citas con interfaz intuitiva. Incluye estad√≠sticas de
            pacientes, doctores y citas completadas con dise√±o m√©dico profesional.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> React, Node.js, Base de Datos, API REST
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">Demo:</span>
            <a
              href="https://alamia.es/proyectos-ejemplo/gestion-citas/index.html"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              Ver Plataforma ‚Üí
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 5: Web Administrator -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/admin-portal.svg"
            alt="Portal administrativo con sistema de login seguro para equipos internos"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Sistema administrativo seguro con autenticaci√≥n y control de acceso"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà Portal Administrativo</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Activo</span>
          </div>
          <div class="mb-3">
            Sistema de acceso administrativo seguro para equipos internos. Portal exclusivo para
            gesti√≥n de usuarios autorizados con interfaz moderna y sistema de autenticaci√≥n robusto.
            Dise√±ado para entornos profesionales que requieren control de acceso.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> React, Autenticaci√≥n, Seguridad, UI/UX
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Web:</span>
            <a
              href="https://web-adiministrador.vercel.app/"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              Acceso Administrativo ‚Üí
            </a>
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">GitHub:</span>
            <a
              href="https://github.com/Gusi-ui/web-adiministra"
              target="_blank"
              class="text-terminal-text underline hover:text-terminal-bright"
            >
              github.com/Gusi-ui/web-administra ‚Üí
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 6: E-commerce Platform -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/ecommerce-platform.svg"
            alt="Plataforma e-commerce con cat√°logo de productos y carrito de compras moderno"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Tienda online moderna con React, Node.js y procesamiento de pagos con Stripe"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà E-commerce Platform</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Planificado</span>
          </div>
          <div class="mb-3">
            Plataforma de comercio electr√≥nico moderna con cat√°logo de productos, carrito de
            compras, procesamiento de pagos integrado con Stripe y dashboard administrativo
            completo. Incluye gesti√≥n de inventario, √≥rdenes y an√°lisis de ventas en tiempo real.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> React, Node.js, Stripe API, PostgreSQL,
            JWT
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">Caracter√≠sticas:</span> Cat√°logo din√°mico, Pagos seguros,
            Admin dashboard, Analytics
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 7: API Developer Portal -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/api-developer-portal.svg"
            alt="Portal developer para gesti√≥n y documentaci√≥n de APIs con herramientas interactivas"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Portal completo para desarrolladores con documentaci√≥n autom√°tica y testing de APIs"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà API Developer Portal</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Planificado</span>
          </div>
          <div class="mb-3">
            Portal completo para gesti√≥n y documentaci√≥n de APIs. Plataforma interactiva para
            desarrolladores con documentaci√≥n autom√°tica, entorno de pruebas integrado, sistema de
            autenticaci√≥n y monitoreo de uso de APIs en tiempo real.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> Astro, React, Node.js, OpenAPI, JWT,
            Redis
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">Caracter√≠sticas:</span> Documentaci√≥n interactiva, Testing
            interface, Rate limiting, Analytics
          </div>
        </div>
      </div>
    </section>

    <!-- Proyecto 8: Content Management System -->
    <section class="rounded border border-terminal-dim p-4">
      <div class="grid grid-cols-1 items-start gap-6 lg:grid-cols-2">
        <!-- Image Column -->
        <div class="project-image-container order-1 lg:order-1">
          <img
            src="/images/projects/cms-headless.svg"
            alt="Sistema de gesti√≥n de contenido con interfaz de administraci√≥n moderna - CMS Headless"
            class="project-image h-auto w-full"
            loading="lazy"
            onload="this.style.opacity = '1'; this.classList.add('loaded')"
            style="opacity: 0; transition: opacity 0.3s ease-in-out;"
            onerror="this.style.opacity = '0.5'; this.parentElement.classList.add('error')"
            title="Sistema de gesti√≥n de contenido headless con editor visual drag-and-drop"
            width="600"
            height="300"
          />
        </div>
        <!-- Content Column -->
        <div class="order-2 lg:order-2">
          <div class="mb-2 text-lg text-terminal-bright">‚ñà CMS Headless</div>
          <div class="mb-2 text-sm text-terminal-dim">
            Estado: <span class="text-terminal-text">Planificado</span>
          </div>
          <div class="mb-3">
            Sistema de gesti√≥n de contenido headless con interfaz administrativa React y frontend
            Astro. Editor visual drag-and-drop, soporte multi-idioma, optimizaci√≥n SEO autom√°tica y
            gesti√≥n avanzada de medios digitales para sitios web modernos.
          </div>
          <div class="mb-2 text-sm">
            <span class="text-terminal-dim">Tecnolog√≠as:</span> React, Astro, Node.js, GraphQL, Cloud
            Storage
          </div>
          <div class="text-sm">
            <span class="text-terminal-dim">Caracter√≠sticas:</span> Editor visual, Multi-idioma, SEO
            autom√°tico, Media management
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="mt-6 border-t border-terminal-dim pt-4 text-sm text-terminal-dim">
    <div class="mb-2 text-center">
      M√°s proyectos en: <a
        href="https://github.com/Gusi-ui"
        target="_blank"
        class="text-terminal-text underline hover:text-terminal-bright">github.com/Gusi-ui</a
      >
    </div>
    <div class="text-center">Escribe 'menu' para volver al men√∫ principal.</div>
  </div>

  <!-- SEO Schema Markup for Projects -->
  <script type="application/ld+json" is:inline>
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Proyectos de Gusi - Portfolio de Desarrollo Web",
      "description": "Colecci√≥n de proyectos desarrollados por Gusi showcasing expertise in modern web technologies including Astro, React, Node.js, and API development",
      "url": "https://gusi.dev/projects",
      "numberOfItems": 8,
      "itemListElement": [
        {
          "@type": "CreativeWork",
          "name": "Blade Runner Terminal",
          "description": "Terminal retro-futurista interactiva construida con Astro con est√©tica cyberpunk inspirada en Blade Runner",
          "url": "https://gusi.dev/",
          "image": "/images/projects/cyberpunk-terminal-interface.svg",
          "keywords": ["astro", "typescript", "terminal", "cyberpunk", "retro-futurista"],
          "technologies": ["Astro", "TypeScript", "Tailwind CSS", "NASA API", "NewsAPI"]
        },
        {
          "@type": "CreativeWork",
          "name": "Portfolio Personal - Jos√© Mart√≠nez Gusi",
          "description": "Portfolio profesional de desarrollador freelance especializado en experiencias digitales excepcionales",
          "url": "https://alamia.es/",
          "image": "/images/projects/developer-portfolio.svg",
          "keywords": ["portfolio", "desarrollador", "freelance", "full-stack"],
          "technologies": ["HTML5", "CSS3", "JavaScript", "Responsive Design"]
        },
        {
          "@type": "CreativeWork",
          "name": "Analytics Pro Dashboard",
          "description": "Dashboard avanzado para an√°lisis de m√©tricas empresariales con visualizaci√≥n en tiempo real",
          "url": "https://alamia.es/proyectos-ejemplo/dashboard-analytics/",
          "image": "/images/projects/analytics-dashboard.svg",
          "keywords": ["dashboard", "analytics", "m√©tricas", "empresarial", "react"],
          "technologies": ["React", "JavaScript", "Chart.js", "Analytics API"]
        },
        {
          "@type": "CreativeWork",
          "name": "MediCitas - Gesti√≥n de Citas M√©dicas",
          "description": "Plataforma integral para gesti√≥n inteligente de citas m√©dicas con m√°s de 25,000 citas realizadas",
          "url": "https://alamia.es/proyectos-ejemplo/gestion-citas/",
          "image": "/images/projects/medical-appointments.svg",
          "keywords": ["citas m√©dicas", "gesti√≥n", "plataforma", "salud", "react"],
          "technologies": ["React", "Node.js", "Database", "REST API"]
        },
        {
          "@type": "CreativeWork",
          "name": "Portal Administrativo Seguro",
          "description": "Sistema de acceso administrativo seguro para equipos internos con autenticaci√≥n robusta",
          "url": "https://web-administrador.vercel.app/",
          "image": "/images/projects/admin-portal.svg",
          "keywords": ["administrativo", "seguridad", "autenticaci√≥n", "portal"],
          "technologies": ["React", "Authentication", "Security", "UI/UX"]
        },
        {
          "@type": "CreativeWork",
          "name": "E-commerce Platform",
          "description": "Plataforma de comercio electr√≥nico moderna con React, Node.js y procesamiento de pagos con Stripe",
          "image": "/images/projects/ecommerce-platform.svg",
          "keywords": ["ecommerce", "tienda online", "react", "stripe", "pagos"],
          "technologies": ["React", "Node.js", "Stripe API", "PostgreSQL", "JWT"]
        },
        {
          "@type": "CreativeWork",
          "name": "API Developer Portal",
          "description": "Portal completo para desarrolladores con documentaci√≥n autom√°tica y entorno de pruebas integrado",
          "image": "/images/projects/api-developer-portal.svg",
          "keywords": ["api", "desarrolladores", "documentaci√≥n", "testing", "astro"],
          "technologies": ["Astro", "React", "Node.js", "OpenAPI", "JWT", "Redis"]
        },
        {
          "@type": "CreativeWork",
          "name": "CMS Headless",
          "description": "Sistema de gesti√≥n de contenido headless con editor visual drag-and-drop y optimizaci√≥n SEO autom√°tica",
          "image": "/images/projects/cms-headless.svg",
          "keywords": ["cms", "headless", "editor visual", "seo", "contenido"],
          "technologies": ["React", "Astro", "Node.js", "GraphQL", "Cloud Storage"]
        }
      ]
    }
  </script>
</div>

<script>
  // Enhanced image loading with better error handling and performance
  class ProjectImageLoader {
    constructor() {
      this.setupImageLoading();
    }

    setupImageLoading() {
      const images = document.querySelectorAll<HTMLImageElement>('.project-image-container img');

      images.forEach((img: HTMLImageElement) => {
        const container = img.parentElement;

        if (!container) return;

        // Add loading state initially
        container.classList.add('loading');

        // Set up load handler
        img.onload = () => {
          container.classList.remove('loading');
          img.classList.add('loaded');
          (img as HTMLElement).style.opacity = '1';
        };

        // Enhanced error handler
        img.onerror = () => {
          container.classList.remove('loading');
          container.classList.add('error');
          (img as HTMLElement).style.opacity = '0.5';

          // Try to reload the image once after a delay
          setTimeout(() => {
            const imgElement = img as HTMLImageElement;
            if (
              imgElement.complete &&
              (imgElement.naturalWidth === 0 || imgElement.naturalHeight === 0)
            ) {
              this.tryFallbackImage(imgElement);
            }
          }, 2000);
        };

        // Intersection Observer for better performance
        if ('IntersectionObserver' in window) {
          const observer = new IntersectionObserver(
            entries => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  this.loadImage(img);
                  observer.unobserve(img);
                }
              });
            },
            { rootMargin: '50px' }
          );

          observer.observe(img);
        } else {
          // Fallback for older browsers
          this.loadImage(img);
        }
      });
    }

    loadImage(img: HTMLImageElement) {
      if (img.dataset.loaded) return;

      (img as HTMLElement).style.opacity = '0';
      (img as HTMLElement).style.transition = 'opacity 0.3s ease-in-out';

      // Create a new image to preload
      const newImg = new Image();
      newImg.onload = () => {
        img.src = newImg.src;
        img.dataset.loaded = 'true';
      };
      newImg.onerror = () => {
        if (img.parentElement) {
          img.parentElement.classList.add('error');
        }
      };

      newImg.src = img.src;
    }

    tryFallbackImage(img: HTMLImageElement) {
      // Try alternative image formats or sources
      const originalSrc = img.src;
      const fallbackSrc = originalSrc.replace('.svg', '.jpg');

      if (fallbackSrc !== originalSrc) {
        const testImg = new Image();
        testImg.onload = () => {
          img.src = fallbackSrc;
        };
        testImg.onerror = () => {
          // Use a default placeholder
          img.src =
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzExMTExMSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTAwIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNjY2NjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JbWFnZSBub3QgZm91bmQ8L3RleHQ+PC9zdmc+';
        };
        testImg.src = fallbackSrc;
      }
    }
  }

  // Initialize when component loads
  document.addEventListener('DOMContentLoaded', () => {
    // Initialize image loader for cases where projects are loaded directly
    new ProjectImageLoader();

    // Also check if we're supposed to show projects (for direct page loads)
    const urlParams = new URLSearchParams(window.location.search);
    const view = urlParams.get('view');
    if (view === 'projects') {
      const terminal = window.terminal;
      const projectsComponent = document.getElementById('projects-component');
      if (terminal && projectsComponent) {
        setTimeout(() => {
          (terminal as { printOutput: (html: string) => void }).printOutput(
            projectsComponent.innerHTML
          );
        }, 200);
      }
    }
  });

  // Initialize when view changes (for SPA behavior)
  document.addEventListener('loadView', (e: Event) => {
    const customEvent = e as CustomEvent;
    if (customEvent.detail.view === 'projects') {
      console.log('Projects: loadView event received for projects');

      const terminal = (window as { terminal?: unknown }).terminal;
      const projectsComponent = document.getElementById('projects-component');

      if (terminal && projectsComponent) {
        console.log('Projects: Terminal and component found, displaying projects');

        // Initialize image loader first
        new ProjectImageLoader();

        // Then display the projects content in the terminal
        setTimeout(() => {
          (terminal as { printOutput: (html: string) => void }).printOutput(
            projectsComponent.innerHTML
          );
          console.log('Projects: Content displayed in terminal');
        }, 150);
      } else {
        console.warn('Projects: Terminal or component not found', {
          terminal: !!terminal,
          projectsComponent: !!projectsComponent,
        });

        // Fallback: try again after a longer delay
        setTimeout(() => {
          const retryTerminal = (window as { terminal?: unknown }).terminal;
          const retryComponent = document.getElementById('projects-component');

          if (retryTerminal && retryComponent) {
            console.log('Projects: Retry successful, displaying projects');
            new ProjectImageLoader();
            (retryTerminal as { printOutput: (html: string) => void }).printOutput(
              retryComponent.innerHTML
            );
          } else {
            console.error('Projects: Failed to load projects after retry');
          }
        }, 500);
      }
    }
  });
</script>

<style>
  /* Project image enhancements */
  .project-image {
    background: linear-gradient(45deg, rgba(0, 255, 65, 0.1), rgba(0, 255, 65, 0.05));
    border: 2px solid var(--terminal-dim, #333);
    box-shadow:
      0 0 20px rgba(0, 255, 65, 0.1),
      inset 0 0 20px rgba(0, 255, 65, 0.05);
  }

  .project-image:hover {
    box-shadow:
      0 0 30px rgba(0, 255, 65, 0.2),
      inset 0 0 30px rgba(0, 255, 65, 0.1);
    transform: translateY(-2px);
    transition: all 0.3s ease;
  }

  .project-image-container {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
  }

  /* Fallback for images that fail to load */
  .project-image-container::before {
    content: 'üì∑';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2rem;
    opacity: 0.3;
    z-index: 1;
  }

  /* Ensure images are visible by default */
  .project-image-container img {
    position: relative;
    z-index: 2;
  }

  /* Loading state */
  .project-image-container img:not([src]),
  .project-image-container img[src=''] {
    opacity: 0.5;
  }

  /* Responsive image sizing for new layout */
  @media (max-width: 640px) {
    .project-image-container img {
      max-height: 200px;
      object-fit: cover;
    }
  }

  @media (min-width: 641px) {
    .project-image-container img {
      max-height: 300px;
      object-fit: cover;
    }
  }

  /* Loading skeleton animation */
  @keyframes loading-shimmer {
    0% {
      background-position: -200px 0;
    }
    100% {
      background-position: calc(200px + 100%) 0;
    }
  }

  .project-image-container.loading {
    background: linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 37%, #1a1a1a 63%);
    background-size: 400px 100%;
    animation: loading-shimmer 1.5s ease-in-out infinite;
  }

  .project-image-container.loading::before {
    content: '‚è≥';
    opacity: 0.8;
  }

  /* Error state for failed images */
  .project-image-container.error {
    background: linear-gradient(45deg, rgba(220, 38, 38, 0.1), rgba(153, 27, 27, 0.1));
    border: 2px solid rgba(220, 38, 38, 0.3);
    position: relative;
  }

  .project-image-container.error::before {
    content: '‚ö†Ô∏è';
    opacity: 0.8;
  }

  .project-image-container.error::after {
    content: 'Error loading image';
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    color: rgba(220, 38, 38, 0.8);
    background: rgba(0, 0, 0, 0.7);
    padding: 4px 8px;
    border-radius: 4px;
    white-space: nowrap;
  }

  /* Enhanced image styling */
  .project-image {
    transition: all 0.3s ease-in-out;
    cursor: pointer;
  }

  .project-image:hover {
    transform: scale(1.02);
    box-shadow:
      0 0 40px rgba(0, 255, 65, 0.3),
      inset 0 0 40px rgba(0, 255, 65, 0.1);
  }

  .project-image.loaded {
    opacity: 1 !important;
  }

  /* Grid layout improvements */
  .grid {
    gap: 1.5rem;
  }

  @media (min-width: 1024px) {
    .grid {
      gap: 2rem;
    }
  }

  /* Ensure proper image aspect ratio */
  .project-image-container img {
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  /* Responsive image sizing improvements for new layout */
  @media (max-width: 480px) {
    .project-image-container {
      height: 150px;
    }

    .project-image-container img {
      height: 150px;
      width: 100%;
      object-fit: cover;
    }
  }

  @media (min-width: 481px) and (max-width: 768px) {
    .project-image-container {
      height: 200px;
    }

    .project-image-container img {
      height: 200px;
      width: 100%;
      object-fit: cover;
    }
  }

  @media (min-width: 769px) {
    .project-image-container {
      height: 300px;
    }

    .project-image-container img {
      height: 300px;
      width: 100%;
      object-fit: cover;
    }
  }
</style>
